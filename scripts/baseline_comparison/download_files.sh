#!/bin/bash
set -e
declare -a datasets=(
    "connect-4"
    "isolet"
    "adult"
    "okcupid-stem"
    "electricity"
    "bank-marketing"
    "KDDCup09-Upselling"
    "one-hundred-plants-margin"
    "KDDCup09_appetency"
    "jungle_chess_2pcs_raw_endgame_complete"
    "2dplanes"
    "fried"
    "Click_prediction_small"
    "nomao"
    "Amazon_employee_access"
    "pendigits"
    "microaggregation2"
    "artificial-characters"
    "robert"
    "houses"
    "Indian_pines"
    "diamonds"
    "guillermo"
    "riccardo"
    "MagicTelescope"
    "nursery"  # Cumulative Size: 50 GB (175 datasets)
    "har"
    "texture"
    "fabert"
    "optdigits"
    "mozilla4"
    "volcanoes-b2"
    "eeg-eye-state"
    "volcanoes-b1"
    "OnlineNewsPopularity"
    "volcanoes-b6"
    "dilbert"
    "volcanoes-b5"
    "GesturePhaseSegmentationProcessed"
    "ailerons"
    "volcanoes-d1"
    "volcanoes-d4"
    "mammography"
    "PhishingWebsites"
    "satimage"
    "jm1"
    "first-order-theorem-proving"
    "kdd_internet_usage"
    "eye_movements"
    "wine-quality-white"
    "delta_elevators"
    "mc1"
    "led24"
    "visualizing_soil"
    "house_16H"
    "SpeedDating"
    "bank32nh"
    "bank8FM"
    "cpu_act"
    "cpu_small"
    "kin8nm"
    "puma32H"
    "puma8NH"
    "collins"
    "house_sales"
    "page-blocks"
    "ringnorm"
    "twonorm"
    "delta_ailerons"
    "wind"
    "wall-robot-navigation"
    "elevators"
    "cardiotocography"
    "philippine"
    "pc2"
    "mfeat-factors"
    "christine"
    "phoneme"
    "sylvine"
    "Satellite"
    "pol"
    "churn"
    "wilt"
    "spambase"
    "segment"
    "waveform-5000"
    "hypothyroid"
    "semeion"
    "hiva_agnostic"
    "ada"
    "yeast"
    "Brazilian_houses"
    "steel-plates-fault"
    "pollen"
    "Bioresponse"
    "soybean"
    "Internet-Advertisements"
    "topo_2_1"
    "yprop_4_1"
    "UMIST_Faces_Cropped"
    "madeline"  # Cumulative Size: 8.7 GB (100 datasets)
    "micro-mass"
    "gina"
    "jasmine"
    "splice"
    "dna"
    "wine-quality-red"
    "cnae-9"
    "colleges"
    "madelon"
    "ozone-level-8hr"
    "MiceProtein"
    "volcanoes-a2"
    "volcanoes-a3"
    "Titanic"
    "wine_quality"
    "volcanoes-a4"
    "kc1"
    "eating"
    "car"
    "QSAR-TID-10980"
    "QSAR-TID-11"
    "pbcseq"
    "volcanoes-e1"
    "autoUniv-au6-750"
    "Santander_transaction_value"
    "SAT11-HAND-runtime-regression"
    "GAMETES_Epistasis_2-Way_20atts_0_1H_EDM-1_1"
    "GAMETES_Epistasis_2-Way_1000atts_0_4H_EDM-1_EDM-1_1"
    "GAMETES_Epistasis_2-Way_20atts_0_4H_EDM-1_1"
    "GAMETES_Epistasis_3-Way_20atts_0_2H_EDM-1_1"
    "GAMETES_Heterogeneity_20atts_1600_Het_0_4_0_2_50_EDM-2_001"
    "GAMETES_Heterogeneity_20atts_1600_Het_0_4_0_2_75_EDM-2_001"
    "autoUniv-au7-1100"
    "pc3"
    "Mercedes_Benz_Greener_Manufacturing"
    "OVA_Prostate"
    "OVA_Endometrium"
    "OVA_Kidney"
    "OVA_Lung"
    "OVA_Ovary"
    "pc4"
    "OVA_Breast"
    "OVA_Colon"
    "abalone"
    "LED-display-domain-7digit"
    "analcatdata_dmft"
    "cmc"
    "colleges_usnews"
    "anneal"
    "baseball"
    "hill-valley"
    "space_ga"
    "parity5_plus_5"
    "pc1"
    "eucalyptus"
    "qsar-biodeg"
    "synthetic_control"
    "fri_c0_1000_5"
    "fri_c1_1000_50"
    "fri_c2_1000_25"
    "fri_c3_1000_10"
    "fri_c3_1000_25"
    "autoUniv-au1-1000"
    "credit-g"
    "vehicle"
    "analcatdata_authorship"
    "tokyo1"
    "quake"
    "kdd_el_nino-small"
    "diabetes"  # Cumulative Size: 1.0 GB (30 datasets)
    "blood-transfusion-service-center"
    "us_crime"
    "Australian"
    "autoUniv-au7-700"
    "ilpd"
    "balance-scale"
    "arsenic-female-bladder"
    "climate-model-simulation-crashes"
    "cylinder-bands"
    "meta"
    "house_prices_nominal"
    "kc2"
    "rmftsa_ladata"
    "boston_corrected"
    "fri_c0_500_5"
    "fri_c2_500_50"
    "fri_c3_500_10"
    "fri_c4_500_100"
    "no2"
    "pm10"
    "dresses-sales"
    "fri_c3_500_50"
    "Moneyball"
    "socmob"
    "MIP-2016-regression"
    "sensory"
    "boston"
    "arcene"
    "tecator"
)

s3_root=s3://automl-benchmark-ag/aggregated/ec2/2023_08_21/model_predictions
local_root=/home/ubuntu/sky_workdir/data/results/2023_08_21/model_predictions

if test -f "commands.txt"; then
  rm "commands.txt"
fi

for dataset in "${datasets[@]}"; do
  command="cp ${s3_root}/${dataset}/* ${local_root}/${dataset}"
  echo "$command" >> commands.txt
done

time cat commands.txt | s5cmd run